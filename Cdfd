document.addEventListener("DOMContentLoaded", () => {
    const flowTypeSelect = document.getElementById("flowType");
    const jurisdictionSelect = document.getElementById("jurisdiction");
    const jurisdictionCheckboxContainer = document.getElementById("jurisdiction-checkbox-container");
    const assetClassSelect = document.getElementById("assetClass");

    flowTypeSelect.addEventListener("change", () => {
        const selectedAssetClass = assetClassSelect.value;

        if (flowTypeSelect.value === "onereg") {
            if (selectedAssetClass === "TRAX") {
                // TRAX-specific jurisdiction options for "OneReg"
                jurisdictionSelect.innerHTML = `
                    <option value="TRAXCASH">TRAXCASH</option>
                    <option value="TRAXNONCASH">TRAXNONCASH</option>
                    <option value="TRAXNONCASHOTC">TRAXNONCASHOTC</option>
                `;
                jurisdictionSelect.style.display = "block";
                jurisdictionCheckboxContainer.style.display = "none";
            } else {
                // For other asset classes, the original multiple jurisdiction options
                jurisdictionSelect.style.display = "none";
                jurisdictionCheckboxContainer.style.display = "block";
            }
        } else if (flowTypeSelect.value === "file") {
            if (selectedAssetClass === "TRAX") {
                // Include TRAX as jurisdiction option when flowtype is "file"
                jurisdictionSelect.innerHTML = `
                    <option value="TRAX">TRAX</option>
                `;
                jurisdictionSelect.style.display = "block";
                jurisdictionCheckboxContainer.style.display = "none";
            } else {
                // Default jurisdiction logic for other asset classes
                jurisdictionSelect.style.display = "block";
                jurisdictionCheckboxContainer.style.display = "none";
            }
        } else {
            jurisdictionSelect.style.display = "block";
            jurisdictionCheckboxContainer.style.display = "none";
        }
    });

    assetClassSelect.addEventListener("change", () => {
        flowTypeSelect.dispatchEvent(new Event("change"));
    });
});
